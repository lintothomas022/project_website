<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang='en' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
    <meta charset='UTF-8'/>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'/>
    <title>My Project</title>
    <link rel="stylesheet" href="subpage.css" />
</head>
<body>
    <div class='content'>
        <!-- Navigation Bar -->
        <div class='content'>
        <nav>
            <div class='nav-links'>
                <a href='index.html'>Home</a>
            </div>
        </nav>
</div>


        <!-- Header Section -->
        <header>
            <div class="title">
                LAB 7
                <div class="subtitle">Finite State Machine and Object Detection</div>
            </div>
        </header>

<!-- Main Content Section -->
        <section class="main-content">
          <li>In this lab, we used the OV2640 camera module on a XIAO ESP32S3 Sense to perform object recognition and control a finite state machine. Our first task involved capturing images of 5 different toy cars to use for model training.</li>
            <h2>Data Collection</h2>
            <li>We programmed our microcontroller to capture images of toy cars </li>
          <li>
               <img src="capturing image.png" alt="code to capture image.png" width="600">
            </li>
        <li>We captured a total of 100 images, with 20 images taken from different angles for each of the 5 toy cars.</li>
         <li>
               <img src="car images.png" alt="code to capture image.png" width="600">
         </li>
            
        <h2>Model Training</h2>
            
        <li>Using Edge Impulse to train a FOMO (Faster Objects, More Objects) model for object detection 
            which involves labeling each image by drawing a bounding box around the subject (e.g., cars), creating an impulse, 
            defining model hyperparameters, training the model, and exporting the trained model. 
            Color space from RGB to Grayscale was convereted as well as
            resizing the images to 96x96 pixels. Some of the particularly blurry images were removed.</li>
        <li>
               <img src="Image labeling.png" alt="labeling.png" width="600">
         </li>
        <li>Configurations were customized for XIAO ESP32S3.</li>
        <li>
            <img src="configuration for board.png" alt="configuration.png" width="600">
         </li>
        <li>Extracting features.</li>
        <li>
            <img src="Feature extracting graph.png" alt="graph.png" width="600">
         </li>
        <li>Raw Features.</li>
        <li>
            <img src="raw features.png" alt="raw.png" width="600">
         </li>
        <li>Training output</li>
        <li>
            <img src="training output.png" alt="final output.png" width="600">
         </li>
        <li>Our model achieved a top F1 score of 0.93 on the validation dataset,
            indicating that it will likely be able to identify cars when deployed.</li>
        <li>
            <img src="training results.png" alt="results.png" width="600">
         </li>
        <li>Finally we export the model after training.</li>
         <li>
            <img src="building and exporting the model.png" alt="exporting.png" width="600">
         </li>   

        <h2>Inference</h2>
        <li>The model export from Edge Impulse includes the files necessary to run inference on our XIAO. 
            However, we needed to make two small adjustments before testing the model.

            After uploading the ZIP file downloaded from Edge Impulse, we enabled the ESP NN Accelerator by replacing the ESP-NN folder in our esp32_camera sketch with the one made available
              <a href="https://github.com/Mjrovai/XIAO-ESP32S3-Sense/blob/main/ESP-NN.zip" download="https://github.com/Mjrovai/XIAO-ESP32S3-Sense/blob/main/ESP-NN.zip">here.</a> 
            More detailed instructions for this process are provided <a href="https://wiki.seeedstudio.com/tinyml_course_Image_classification_project/#step-3-run-the-example-sketch" download="https://wiki.seeedstudio.com/tinyml_course_Image_classification_project/#step-3-run-the-example-sketch">here.</a></li>
            

            
</body>
</html>
